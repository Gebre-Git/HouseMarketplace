{% extends 'base.html' %}
{% load humanize %}

{% block content %}
<main class="bg-gray-50 py-16">
    <div class="container mx-auto px-6">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            {% if listing.image %}
            <img src="{{ listing.image.url }}" alt="{{ listing.title }}" class="w-full h-96 object-cover">
            {% endif %}
            <div class="p-8 md:p-12">
                <div class="md:flex md:justify-between md:items-start">
                    <div class="md:w-2/3">
                        <h1 class="text-4xl font-bold text-gray-800 mb-2">{{ listing.title }}</h1>
                        <p class="text-gray-600 text-lg mb-6">{{ listing.location }}</p>
                    </div>
                    <div class="md:w-1/3 md:text-right">
                        <p class="text-4xl font-bold text-blue-500">{{ listing.price|intcomma }} Birr</p>
                        <p class="text-gray-500">{{ listing.get_listing_type_display }}</p>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-8 my-8 border-t border-b py-6">
                    <div class="text-center">
                        <i class="fas fa-bed text-3xl text-blue-500 mb-2"></i>
                        <p class="text-lg font-semibold">{{ listing.bedrooms }}</p>
                        <p class="text-gray-500">Bedrooms</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-bath text-3xl text-blue-500 mb-2"></i>
                        <p class="text-lg font-semibold">{{ listing.bathrooms }}</p>
                        <p class="text-gray-500">Bathrooms</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-ruler-combined text-3xl text-blue-500 mb-2"></i>
                        <p class="text-lg font-semibold">{{ listing.size_sq_meters }} mÂ²</p>
                        <p class="text-gray-500">Area</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-building text-3xl text-blue-500 mb-2"></i>
                        <p class="text-lg font-semibold">{{ listing.get_property_type_display }}</p>
                        <p class="text-gray-500">Type</p>
                    </div>
                </div>

                <div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Description</h2>
                    <p class="text-gray-700 leading-relaxed">{{ listing.description }}</p>
                </div>

                <div class="mt-10 pt-6 border-t">
                    <div class="flex items-center">
                        <div>
                            <p class="text-xl font-semibold text-gray-800">Listed by</p>
                            <a href="{% url 'seller_profile' listing.seller.id %}" class="text-blue-500 hover:underline">{{ listing.seller.username }}</a>
                        </div>
                    </div>
                </div>

                {% if user == listing.seller %}
                <div class="mt-10 pt-6 border-t flex justify-end space-x-4">
                    <a href="{% url 'listing_update' listing.id %}" class="bg-blue-500 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-600 transition-transform duration-300 transform hover:scale-105">
                        <i class="fas fa-edit mr-2"></i> Edit Listing
                    </a>
                    <a href="{% url 'listing_delete' listing.id %}" class="bg-red-500 text-white px-6 py-3 rounded-full font-bold hover:bg-red-600 transition-transform duration-300 transform hover:scale-105">
                        <i class="fas fa-trash mr-2"></i> Delete Listing
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</main>
{% endblock %}
